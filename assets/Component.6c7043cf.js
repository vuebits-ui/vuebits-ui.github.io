import{d as re,A as Ce,z as Se,V as Ue,u as Be,v as V,g as S,o as m,e as y,c as Q,W as we,w as b,b as oe,F as te,s as ne,n as x,h as d,a as s,B as Ee,m as D,K as se,t as H,i as G,j as M,T as Te,Q as N,X as Le,D as _e,E as Pe,G as Ke,H as ze,Y as De,Z as He,$ as Me,y as Ne,f as ie,a0 as Re,p as qe,M as Fe,a1 as ae,a2 as Je,_ as R,r as c,P as Oe,a3 as je}from"./index.d767eba6.js";import{U as Ge}from"./Component.fc69c4f1.js";import{_ as Qe}from"./AsyncContent.vue_vue_type_script_setup_true_lang.5586704b.js";import{_ as We,S as Xe,a as Ye}from"./ComponentApi.vue_vue_type_script_setup_true_lang.3f016e89.js";import{_ as Ze}from"./KnobBoolean.vue_vue_type_script_setup_true_lang.f57d079d.js";import{_ as $e}from"./KnobListItem.vue_vue_type_script_setup_true_lang.47d5f286.js";import{_ as el}from"./KnobString.vue_vue_type_script_setup_true_lang.62422955.js";import{_ as ll}from"./Knobs.vue_vue_type_script_setup_true_lang.14474ee8.js";import{a as ol,s as tl}from"./story-params.bce1115e.js";const nl=["data-item-key"],sl=["onClick"],q=re({__name:"Autocomplete",props:Ce({modelValue:{},items:{},placeholder:{},type:{},required:{type:Boolean},min:{},max:{},maxlength:{},step:{},label:{},width:{},leftIcon:{},leftIconClickable:{type:Boolean},leftIconColor:{},disabled:{type:Boolean},maxHeight:{},listPosition:{},itemsLoading:{type:Boolean},itemsError:{type:Boolean},itemsReloadable:{type:Boolean},textarea:{type:Boolean},rows:{},noMatchingItemsText:{},external:{type:Boolean},searchDelay:{},multiple:{type:Boolean},clearable:{type:Boolean},dark:{type:Boolean},light:{type:Boolean},bordered:{type:Boolean},rounded:{type:Boolean},roundedLg:{type:Boolean},round:{type:Boolean},error:{type:Boolean},depressed:{type:Boolean},size:{}},{modelValue:null,placeholder:null,type:"text",required:!1,min:null,max:null,maxlength:null,step:1,label:null,width:null,leftIcon:null,leftIconClickable:!1,leftIconColor:null,disabled:!1,maxHeight:320,listPosition:"bottom",itemsLoading:!1,itemsError:!1,itemsReloadable:!1,textarea:!1,rows:null,noMatchingItemsText:"",external:!1,searchDelay:0,multiple:!1,clearable:!0,..._e,...Pe,...Ke,...ze,...De,...He}),emits:["update:modelValue","enter","focus","blur","click-left-icon","click-right-icon","select","update","reload","search"],setup(v,{expose:o,emit:h}){const r=v,l=h,{dark:A,light:k,bordered:g,rounded:u,roundedLg:C}=Se(r),U=Ue(A,k),w=Be(),p=qe("ui-autocomplete"),t=V(null),F=V(null),J=V(!1),I=V(!1),O=V(!1),f=V(null),E=V(""),W=V(null),L=S(()=>Array.isArray(r.modelValue)?r.modelValue:r.modelValue?[r.modelValue]:[]),_=S(()=>Array.isArray(r.modelValue)?null:r.modelValue),de=S(()=>r.noMatchingItemsText||w.t().autocomplete.noMatchingItems),ue=S(()=>r.textarea?Ge:Fe),P=S(()=>{const e=r.external?r.items:r.items.filter(a=>{var n;return!E.value||((n=a.text)==null?void 0:n.toLowerCase().includes(E.value.toLowerCase()||""))||a.header||a.divider});return e.filter((a,n)=>{var le;const i=(a.header||a.divider)&&!a.key,B=!((le=e[n+1])==null?void 0:le.key);return!(i&&B)})}),me=S(()=>[...p({e:"input",m:{expanded:I.value}})]),ce=S(()=>[...p({e:"items",m:{"theme-default":!r.light&&!r.dark,[r.listPosition]:!0,rounded:r.rounded,"rounded-lg":r.roundedLg,round:r.round}}),U.value]),K=e=>!!e&&L.value.map(a=>a.key).includes(e),j=()=>{J.value=!1,I.value=!1,O.value=!1,f.value=null},pe=e=>{e.code==="Tab"&&j()},X=()=>{if(!f.value||!t.value)return;const e=t.value.offsetHeight,a=t.value.scrollTop,n=t.value.querySelectorAll(`[data-item-key="${f.value}"]`)[0],i=n.offsetTop,B=n.offsetHeight;i<a?t.value.scrollTo({top:i}):i+B>e+a&&t.value.scrollTo({top:i-e+B})},Y=()=>{E.value="",I.value=!0},T=()=>{l("focus"),J.value=!0,Y()},fe=()=>{T(),ae(()=>{const e=P.value.filter(i=>!!i.key&&!i.disabled);let a=e.length;f.value&&(a=e.findIndex(i=>i.key===f.value));const n=e[a-1];n&&(f.value=n.key||null,X())})},ye=()=>{T(),ae(()=>{const e=P.value.filter(i=>!!i.key&&!i.disabled);let a=-1;f.value&&(a=e.findIndex(i=>i.key===f.value));const n=e[a+1];n&&(f.value=n.key||null,X())})},z=e=>{l("update:modelValue",e),l("update",e)},Z=e=>{const a=L.value.filter(n=>n.key!==e.key);z(a)},$=e=>{if(r.multiple)if(K(e.key))Z(e);else{const a=[...L.value,e];z(a)}else(!K(e.key)||Array.isArray(r.modelValue))&&(l("select",e),z(e)),J.value=!1,I.value=!1,O.value=!1;f.value=null},be=()=>{if(f.value){const e=r.items.find(a=>a.key===f.value);e&&$(e)}},ve=()=>{I.value?be():T()},ke=e=>[...p({e:"item",m:{disabled:e.disabled===!0,active:e.key===f.value,selected:K(e.key)}}),Je],ge=()=>{z(null)},he=()=>{l("reload")},ee=e=>{l("search",e)},Ie=e=>{E.value=e,r.searchDelay?(clearTimeout(W.value),W.value=setTimeout(()=>{ee(e)},r.searchDelay)):ee(e)},Ve=e=>{if(!F.value)return;F.value.$el.contains(e.target)||j()},xe=e=>{l("blur",e)},Ae=e=>{l("enter",{key:null,text:e})};return o({focus:T}),(e,a)=>(m(),y("div",D({class:d(p)({})},e.$ui.testElName("autocomplete")),[(m(),Q(Le(ue.value),D({ref_key:"input",ref:F,readonly:!I.value,"model-value":I.value?E.value:!e.multiple&&_.value?_.value.text:"",placeholder:e.placeholder,type:e.type,required:e.required,min:e.min,max:e.max,maxlength:e.maxlength,step:e.step,label:e.label,width:e.width,rows:e.rows,"left-icon":e.leftIcon,"left-icon-clickable":e.leftIconClickable,"left-icon-color":e.leftIconColor,"right-icon":e.clearable&&_.value&&_.value.key?e.$ui.icons.values.close:null,"right-icon-clickable":"",disabled:e.disabled,bordered:d(g),dark:d(A),light:d(k),rounded:d(u),"rounded-lg":d(C),round:e.round,error:e.error,class:me.value,depressed:e.depressed,size:e.size,clearable:e.clearable},e.$ui.testElName("autocomplete-input"),{onEnter:Ae,onFocus:T,onClick:Y,onBlur:xe,onInput:Ie,onClickLeftIcon:a[1]||(a[1]=n=>e.$emit("click-left-icon")),onClickRightIcon:ge,onKeydown:[N(fe,["up"]),N(ye,["down"]),N(se(ve,["prevent","stop"]),["enter"]),N(j,["esc"]),pe]}),we({after:b(()=>[s(Te,{name:"slide-top"},{default:b(()=>[I.value?Ee((m(),y("div",D({key:0,ref_key:"list",ref:t,class:ce.value,style:{maxHeight:`${e.maxHeight}px`}},e.$ui.testElName("autocomplete-list"),{onClick:a[0]||(a[0]=se(n=>O.value=!0,["stop"]))}),[s(d(Qe),{loading:e.itemsLoading,error:e.itemsError,reloadable:e.itemsReloadable,onReload:he},{default:b(()=>[P.value.length===0?(m(),y("div",{key:0,class:x(d(p)({e:"no-items-text"}))},H(de.value),3)):(m(!0),y(te,{key:1},ne(P.value,(n,i)=>(m(),y("div",{key:i,"data-item-key":n.key},[n.header?(m(),y("div",{key:0,class:x(d(p)({e:"item-header"}))},H(n.header),3)):M("",!0),n.key?(m(),y("div",D({key:1,class:ke(n)},e.$ui.testElName("autocomplete-list-item"),{onClick:B=>$(n)}),[G(e.$slots,"item",{id:n.key,text:n.text,metadata:n.metadata,isActive:K(n.key)},()=>[ie(H(n.text),1)])],16,sl)):M("",!0),n.divider?(m(),y("div",{key:2,class:x(d(p)({e:"item-divider"}))},null,2)):M("",!0)],8,nl))),128)),G(e.$slots,"additional-item")]),_:3},8,["loading","error","reloadable"])],16)),[[d(Re),Ve]]):M("",!0)]),_:3})]),_:2},[e.multiple?{name:"before-text",fn:b(()=>[oe("div",{class:x(d(p)({e:"selected-items"}))},[(m(!0),y(te,null,ne(L.value,(n,i)=>(m(),Q(d(Me),{key:i,class:x(d(p)({e:"selected-item-badge"})),color:"primary",round:""},{default:b(()=>[G(e.$slots,"selected-item",{id:n.key,text:n.text,metadata:n.metadata},()=>[oe("div",{class:x(d(p)({e:"selected-item-badge-text"}))},H(n.text),3)]),s(d(Ne),{icon:e.$ui.icons.values.close,size:"sm",round:"",color:"primary",class:x(d(p)({e:"selected-item-remove"})),onClick:B=>Z(n)},null,8,["icon","class","onClick"])]),_:2},1032,["class"]))),128))],2)]),key:"0"}:void 0]),1040,["readonly","model-value","placeholder","type","required","min","max","maxlength","step","label","width","rows","left-icon","left-icon-clickable","left-icon-color","right-icon","disabled","bordered","dark","light","rounded","rounded-lg","round","error","class","depressed","size","clearable","onKeydown"]))],16))}}),al={name:"AutocompleteExample",components:{Preview:We,Sandbox:Xe,Knobs:ll,KnobListItem:$e,KnobBoolean:Ze,KnobString:el,UiAutocomplete:q},data(){return{items:[{header:"Header 1"},{key:1,text:"Item 1"},{key:2,text:"Item 2"},{header:"Header 2"},{key:3,text:"Item 3"}],value:null,icons:ol,text:"some text...",bordered:!1,round:!0,rounded:!1,roundedLg:!1,dark:!1,light:!0,disabled:!1,leftIcon:"none",rightIcon:"none",error:!1,textarea:!1,multiple:!1,depressed:!0,placeholder:"Search",sizes:tl,size:"md",clearable:!0}}};function rl(v,o,h,r,l,A){const k=c("UiAutocomplete"),g=c("Preview"),u=c("KnobBoolean"),C=c("KnobListItem"),U=c("KnobString"),w=c("Knobs"),p=c("Sandbox");return m(),Q(p,{id:"example",title:"Example"},{controls:b(()=>[s(w,null,{default:b(()=>[s(u,{modelValue:l.dark,"onUpdate:modelValue":o[1]||(o[1]=t=>l.dark=t),label:"Dark"},null,8,["modelValue"]),s(u,{modelValue:l.light,"onUpdate:modelValue":o[2]||(o[2]=t=>l.light=t),label:"Light"},null,8,["modelValue"]),s(u,{modelValue:l.bordered,"onUpdate:modelValue":o[3]||(o[3]=t=>l.bordered=t),label:"Bordered"},null,8,["modelValue"]),s(u,{modelValue:l.depressed,"onUpdate:modelValue":o[4]||(o[4]=t=>l.depressed=t),label:"Depressed"},null,8,["modelValue"]),s(u,{modelValue:l.rounded,"onUpdate:modelValue":o[5]||(o[5]=t=>l.rounded=t),label:"Rounded"},null,8,["modelValue"]),s(u,{modelValue:l.roundedLg,"onUpdate:modelValue":o[6]||(o[6]=t=>l.roundedLg=t),label:"Rounded large"},null,8,["modelValue"]),s(u,{modelValue:l.round,"onUpdate:modelValue":o[7]||(o[7]=t=>l.round=t),label:"Round"},null,8,["modelValue"]),s(u,{modelValue:l.disabled,"onUpdate:modelValue":o[8]||(o[8]=t=>l.disabled=t),label:"Disabled"},null,8,["modelValue"]),s(C,{modelValue:l.leftIcon,"onUpdate:modelValue":o[9]||(o[9]=t=>l.leftIcon=t),items:l.icons,label:"Left icon"},null,8,["modelValue","items"]),s(C,{modelValue:l.rightIcon,"onUpdate:modelValue":o[10]||(o[10]=t=>l.rightIcon=t),items:l.icons,label:"Right icon"},null,8,["modelValue","items"]),s(C,{modelValue:l.size,"onUpdate:modelValue":o[11]||(o[11]=t=>l.size=t),items:l.sizes,label:"Size"},null,8,["modelValue","items"]),s(u,{modelValue:l.error,"onUpdate:modelValue":o[12]||(o[12]=t=>l.error=t),label:"Error"},null,8,["modelValue"]),s(u,{modelValue:l.textarea,"onUpdate:modelValue":o[13]||(o[13]=t=>l.textarea=t),label:"Textarea"},null,8,["modelValue"]),s(u,{modelValue:l.multiple,"onUpdate:modelValue":o[14]||(o[14]=t=>l.multiple=t),label:"Multiple"},null,8,["modelValue"]),s(u,{modelValue:l.clearable,"onUpdate:modelValue":o[15]||(o[15]=t=>l.clearable=t),label:"Clearable"},null,8,["modelValue"]),s(U,{modelValue:l.placeholder,"onUpdate:modelValue":o[16]||(o[16]=t=>l.placeholder=t),label:"Placeholder"},null,8,["modelValue"])]),_:1})]),default:b(()=>[s(g,{height:"200px"},{default:b(()=>[s(k,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=t=>l.value=t),items:l.items,bordered:l.bordered,round:l.round,rounded:l.rounded,"rounded-lg":l.roundedLg,dark:l.dark,light:l.light,disabled:l.disabled,"left-icon":l.leftIcon!=="none"?l.leftIcon:null,"right-icon":l.rightIcon!=="none"?l.rightIcon:null,error:l.error,textarea:l.textarea,multiple:l.multiple,depressed:l.depressed,placeholder:l.placeholder,size:l.size,clearable:l.clearable},null,8,["modelValue","items","bordered","round","rounded","rounded-lg","dark","light","disabled","left-icon","right-icon","error","textarea","multiple","depressed","placeholder","size","clearable"])]),_:1})]),_:1})}const il=R(al,[["render",rl]]),dl={name:"AutocompleteMultiple",components:{UiAutocomplete:q},data(){return{selected:[],items:[{key:1,text:"Item 1"},{key:2,text:"Item 2 with veeeeeeeeeeeeeeeeeeeeeery loooooooooooooooooooooong teeeeeeeeeeeeeext"},{key:3,text:"Item 3"},{key:4,text:"Item 4"},{key:5,text:"Item 5"},{key:6,text:"Item 6"},{key:7,text:"Item 7"},{key:8,text:"Item 8"},{key:9,text:"Item 9"},{key:10,text:"Item 10"},{key:11,text:"Item 11"},{key:12,text:"Item 12"}]}}};function ul(v,o,h,r,l,A){const k=c("UiAutocomplete");return m(),y("div",null,[s(k,{modelValue:l.selected,"onUpdate:modelValue":o[0]||(o[0]=g=>l.selected=g),items:l.items,bordered:"",multiple:"",placeholder:"Add some items",label:"Selected items"},null,8,["modelValue","items"])])}const ml=R(dl,[["render",ul]]),cl={name:"AutocompleteExternalSearch",components:{UiAutocomplete:q},data(){return{selected:null,loading:!1,items:[{key:1,text:"John Doe"},{key:2,text:"Adam Smith"},{key:3,text:"John Smith"},{key:4,text:"Adam Doe"},{key:5,text:"Jane Smith"}],filteredItems:[]}},methods:{search(v){this.loading=!0,setTimeout(()=>{this.filteredItems=this.items.filter(o=>{var h;return!v||((h=o.text)==null?void 0:h.toLowerCase().includes(v.toLowerCase()||""))}),this.loading=!1},500)}}};function pl(v,o,h,r,l,A){const k=c("UiAutocomplete");return m(),y("div",null,[s(k,{modelValue:l.selected,"onUpdate:modelValue":o[0]||(o[0]=g=>l.selected=g),items:l.filteredItems,bordered:"",external:"","items-loading":l.loading,"search-delay":200,placeholder:"Search",label:"Selected item",onSearch:A.search},null,8,["modelValue","items","items-loading","onSearch"])])}const fl=R(cl,[["render",pl]]),yl=re({name:"DocsComponentsAutocomplete",components:{PageHeader:Oe,ComponentApi:Ye,Example:il,Story:je,AutocompleteMultiple:ml,AutocompleteExternalSearch:fl},data(){return{component:q}}});function bl(v,o,h,r,l,A){const k=c("PageHeader"),g=c("Example"),u=c("ComponentApi"),C=c("AutocompleteMultiple"),U=c("Story"),w=c("AutocompleteExternalSearch");return m(),y("div",{class:x(v.$bem({}))},[s(k,null,{default:b(()=>[ie(" Autocomplete ")]),_:1}),s(g),s(u,{component:v.component},null,8,["component"]),s(U,{"file-name":"Multiple","component-name":"Autocomplete",title:"Multiple"},{default:b(()=>[s(C)]),_:1}),s(U,{"file-name":"ExternalSearch","component-name":"Autocomplete",title:"External search"},{default:b(()=>[s(w)]),_:1})],2)}const Sl=R(yl,[["render",bl]]);export{Sl as default};
